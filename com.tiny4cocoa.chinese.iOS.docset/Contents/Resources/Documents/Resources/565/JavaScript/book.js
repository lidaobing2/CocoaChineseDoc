/* Copyright Â© 2011 Apple Inc.  All rights reserved. */
var more={en:"More&#8230;"};function Pedia(){if($("book-doc-type")&&$("book-doc-type").content=="Pedia"){this.createPediaLinksBox();var a=document.getElementsByTagName("a");for(var b=0;b<a.length;b++){if(!a[b].up(".pediaLink")){a[b].target="_top"}}}else{$$(".pediaLink a").forEach(function(c){c.setAttribute("data-href",c.getAttribute("href"));c.removeAttribute("href")});document.body.observe("click",this.click.bindAsEventListener(this));Event.observe(window,"resize",this.hide.bindAsEventListener(this));this.popover=document.createElement("div");this.popover.id="pediaWindow";this.popover.innerHTML='<div id="pediaHeader"></div><div id="pediaBody"></div>';document.body.appendChild(this.popover)}return this}Pedia.prototype={visible:false,createPediaLinksBox:function(){if($("pageTitle")){var a=document.createElement("div"),c=$$(".pediaPrerequisites").concat($$(".pediaRelated")),b;a.setAttribute("id","pediaLinks");for(b=0;b<c.length;b++){a.innerHTML+=c[b].innerHTML;c[b].remove()}return $("pageTitle").insert({after:a})}else{return false}},addMoreLink:function(c){if(this.toShow.select("a").length>0){var b,a=this.toShow.down("a").getAttribute("data-href");a=window.location.pathname.directoryForURL()+a.split("#")[0];b=document.createElement("span");b.setAttribute("id","peidaMore");b.innerHTML=more.en;c.insert(b);$("peidaMore").observe("click",function(d){top.frames.QuickLook.load(a);this.hide({type:"force"})}.bindAsEventListener(this))}return c},position:function(b){var c=document.viewport.getWidth()-(this.visible.cumulativeOffset().left+this.popover.getWidth()+10),a;c=(c<0)?c-20:-20;if((document.viewport.getHeight()-this.visible.viewportOffset().top-this.popover.getHeight()-50)>0){this.toShow.addClassName("activePedia");return this.popover.clonePosition(this.visible,{setWidth:false,setHeight:false,offsetLeft:c,offsetTop:this.visible.getHeight()})}else{this.toShow.addClassName("activePedia-bottom");a=-1*this.popover.getHeight();return this.popover.clonePosition(this.visible,{setWidth:false,setHeight:false,offsetLeft:c,offsetTop:(a+1)})}},show:function(){this.visible=this.toShow;$("pediaHeader").innerHTML=this.visible.getAttribute("data-header");$("pediaBody").innerHTML=this.visible.getAttribute("data-contents");this.addMoreLink($("pediaBody"));this.position(-4);this.popover.addClassName("visible");return this.visible},click:function(a){this.toShow=a.element().hasClassName("pediaLink")?a.element():a.element().up(".pediaLink");if(!this.toShow){return this.hide({type:"force"})}if(this.toShow!==this.visible){this.hide({type:"force"})}this.show()},hide:function(a){if(this.visible){if(a.type==="resize"||a.type==="scroll"||a.type==="force"||(a.element&&!a.element().descendantOf(this.popover))){this.popover.removeClassName("visible");if(this.visible.hasClassName("activePedia")){this.visible.removeClassName("activePedia")}else{this.visible.removeClassName("activePedia-bottom")}this.visible=false}}}};function Recipe(){var b;if($("book-doc-type")&&$("book-doc-type").content=="Recipe"){var a=document.getElementsByTagName("a");for(b=0;b<a.length;b++){if(!a[b].up(".recipeLink")){a[b].target="_top"}}}else{var c=$$(".recipeLink");for(b=0;b<c.length;b++){c[b].observe("click",this.click.bindAsEventListener(this))}}return this}Recipe.prototype={click:function(a){a.stop();this.toShow=$(Event.element(a)).hasClassName("recipeLink")?$(Event.element(a)):$(Event.element(a)).up(".recipeLink");this.show()},show:function(){var a=this.toShow.down("a").href.split("#")[0];return top.frames.QuickLook.load(a)}};function hashChangeObserver(){var d="",a="",b,c=function(){if(window.location.hash!=="#"){a=window.location.hash.replace("#","");if(d!=a){if(a===""){b=document.getElementById("top");a="top"}else{b=!a.match("jumpTo_")?document.getElementsByName(a)[0]:(document.getElementById(a)?document.getElementById(a):document.getElementById("top"))}b.scrollIntoView();top.frames.selectJumpToItem(a);d=a}}};locationHash.startObserving(c)}Event.observe(window,"dom:loaded",function(){var a=new Pedia();var b=new Recipe()});